{
  "project": "Ralph CLI",
  "branchName": "ralph/npm-distribution",
  "description": "Ralph CLI NPM 分发 - 让开发者可以通过 npm install 或 npx 快速安装和使用 Ralph CLI",
  "userStories": [
    {
      "id": "US-001",
      "title": "创建 npm 包结构",
      "description": "作为开发者，我需要一个 npm 包作为 Ralph CLI 的入口，以便用户可以通过 npm 安装。",
      "acceptanceCriteria": [
        "创建 npm/ 目录存放 npm 相关文件",
        "创建 package.json，包含正确的元数据（name, version, description, bin 字段）",
        "创建 index.js 作为入口文件",
        "创建 install.js 脚本，负责下载对应平台的二进制文件",
        "配置 .npmignore 排除不必要的文件",
        "Typecheck/lint 通过"
      ],
      "priority": 1,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-002",
      "title": "实现二进制下载逻辑",
      "description": "作为用户，我希望安装时自动下载适合我系统的二进制文件，无需手动选择。",
      "acceptanceCriteria": [
        "检测当前平台（macOS/Linux）和架构（x64/arm64）",
        "从 GitHub Releases 下载对应版本的二进制文件",
        "验证下载文件的完整性（SHA256 校验）",
        "将二进制文件保存到包目录的 bin/ 子目录",
        "设置正确的文件权限（可执行）",
        "处理下载失败的情况，提供清晰的错误信息",
        "Typecheck/lint 通过"
      ],
      "priority": 2,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-003",
      "title": "创建 JS 包装层",
      "description": "作为用户，我希望通过 npx ralph 或 ralph 命令直接调用工具，无需关心底层实现。",
      "acceptanceCriteria": [
        "创建 index.js 调用本地二进制文件",
        "将所有命令行参数透传给 Rust 二进制文件",
        "正确处理子进程的 stdin/stdout/stderr",
        "返回与子进程相同的退出码",
        "如果二进制文件不存在，提示运行安装脚本",
        "Typecheck/lint 通过"
      ],
      "priority": 3,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-004",
      "title": "配置 GitHub Actions 自动发布",
      "description": "作为维护者，我希望发布新版本时自动构建多平台二进制文件并发布到 npm。",
      "acceptanceCriteria": [
        "创建 .github/workflows/release.yml 工作流",
        "构建 macOS Intel (x86_64-apple-darwin) 二进制文件",
        "构建 macOS Apple Silicon (aarch64-apple-darwin) 二进制文件",
        "构建 Linux x64 (x86_64-unknown-linux-gnu) 二进制文件",
        "构建 Linux ARM64 (aarch64-unknown-linux-gnu) 二进制文件",
        "将所有二进制文件上传到 GitHub Release",
        "生成各平台的 SHA256 校验文件",
        "在 GitHub Release 发布后自动触发 npm 发布",
        "Typecheck/lint 通过"
      ],
      "priority": 4,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-005",
      "title": "支持离线安装",
      "description": "作为 CI/CD 用户，我希望在没有网络的环境中也能安装 Ralph CLI。",
      "acceptanceCriteria": [
        "支持 npm install ralph-cli --ralph-binary-path=/path/to/ralph 指定本地二进制",
        "如果环境变量 RALPH_BINARY_PATH 存在，跳过下载使用指定路径",
        "提供文档说明如何预下载二进制文件",
        "Typecheck/lint 通过"
      ],
      "priority": 5,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-006",
      "title": "更新项目文档",
      "description": "作为用户，我希望在 README 中看到 npm 安装方式的说明。",
      "acceptanceCriteria": [
        "在 README.md 中添加 npm 安装说明",
        "在 README_zh.md 中添加中文 npm 安装说明",
        "说明全局安装和 npx 使用两种方式",
        "添加故障排除指南（下载失败、权限问题等）",
        "更新 CHANGELOG（如有）"
      ],
      "priority": 6,
      "passes": false,
      "notes": ""
    }
  ]
}
